<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ‡©ğŸ‡ª Deutsch Lernen</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="Aplikacja do nauki jÄ™zyka niemieckiego z fiszkami, quizami i czatem AI">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Deutsch Lernen">
    
    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Deutsch">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icons/icon-72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="icons/icon-96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="icons/icon-128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icons/icon-144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-72.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Splash Screen iOS -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div class="app">
        <!-- Nawigacja -->
        <nav class="navbar">
            <h1>ğŸ‡©ğŸ‡ª Deutsch Lernen</h1>
            <div class="nav-right">
                <div class="stats">
                    <span class="xp">â­ <span id="totalXP">0</span></span>
                    <span class="streak">ğŸ”¥ <span id="streak">0</span></span>
                </div>
                <button class="theme-toggle" onclick="toggleSound()" title="DÅºwiÄ™ki">
                    <span id="soundToggle">ğŸ”Š</span>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="themeIcon">ğŸŒ™</span>
                </button>
            </div>
        </nav>

        <!-- Menu gÅ‚Ã³wne -->
        <div id="menu" class="screen active">
            <div class="level-badge">
                <div class="level-info">
                    <span id="levelTitle">ğŸŒ± PoczÄ…tkujÄ…cy</span>
                    <span id="userLevel">Poziom 1</span>
                </div>
                <div class="progress-bar">
                    <div id="levelProgress" class="progress-fill" style="width: 0%"></div>
                </div>
                <span class="xp-to-next">Do nastÄ™pnego: <span id="xpToNext">100</span> XP</span>
            </div>

            <!-- WybÃ³r poziomu jÄ™zykowego -->
            <div class="language-level-select">
                <span>Poziom jÄ™zykowy:</span>
                <div class="level-buttons">
                    <button class="lang-level-btn active" onclick="setLanguageLevel('A1', this)">A1</button>
                    <button class="lang-level-btn" onclick="setLanguageLevel('A2', this)">A2</button>
                    <button class="lang-level-btn" onclick="setLanguageLevel('B1', this)">B1</button>
                    <button class="lang-level-btn" onclick="setLanguageLevel('B2', this)">B2</button>
                </div>
            </div>
            
            <div class="menu-grid">
                <button class="menu-btn" onclick="startFlashcards()">
                    <span class="icon">ğŸ“š</span>
                    <span>Fiszki</span>
                </button>
                <button class="menu-btn" onclick="startQuiz()">
                    <span class="icon">ğŸ“</span>
                    <span>Quiz</span>
                </button>
                <button class="menu-btn" onclick="startMemory()">
                    <span class="icon">ğŸ®</span>
                    <span>Memory</span>
                </button>
                <button class="menu-btn" onclick="startGrammar()">
                    <span class="icon">âœï¸</span>
                    <span>Gramatyka</span>
                </button>
                <button class="menu-btn" onclick="startTyping()">
                    <span class="icon">âœï¸</span>
                    <span>Pisanie</span>
                </button>
                <button class="menu-btn" onclick="startListening()">
                    <span class="icon">ğŸ§</span>
                    <span>SÅ‚uchanie</span>
                </button>
                <button class="menu-btn" onclick="startSpeaking()">
                    <span class="icon">ğŸ¤</span>
                    <span>MÃ³wienie</span>
                </button>
                <button class="menu-btn" onclick="startChat()">
                    <span class="icon">ğŸ¤–</span>
                    <span>Czat AI</span>
                </button>
                <button class="menu-btn" onclick="showProgress()">
                    <span class="icon">ğŸ“Š</span>
                    <span>PostÄ™py</span>
                </button>
                <button class="menu-btn" onclick="showAllWords()">
                    <span class="icon">ğŸ“–</span>
                    <span>SÅ‚ownik</span>
                </button>
                <button class="menu-btn" onclick="openMyWords()">
                    <span class="icon">â•</span>
                    <span>Moje sÅ‚Ã³wka</span>
                </button>
                <button class="menu-btn" onclick="showLevels()">
                    <span class="icon">ğŸ†</span>
                    <span>Poziomy</span>
                </button>
                <button class="menu-btn" onclick="openReminders()">
                    <span class="icon">âš™ï¸</span>
                    <span>Ustawienia</span>
                </button>
            </div>

            <div class="word-stats">
                ğŸ“š SÅ‚Ã³w w bazie: <span id="totalWordsCount">0</span>
            </div>
        </div>

        <!-- Ekran fiszek -->
        <div id="flashcards" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            
            <div class="current-lang-level">
                Poziom: <span id="currentLangLevel">A1</span>
            </div>

            <div class="category-select">
                <select id="categorySelect" onchange="loadCategory()">
                    <optgroup label="ğŸ“— Podstawowe">
                        <option value="basics">ğŸ—£ï¸ Podstawy</option>
                        <option value="greetings">ğŸ‘‹ Powitania</option>
                        <option value="numbers">ğŸ”¢ Liczby</option>
                        <option value="colors">ğŸ¨ Kolory</option>
                        <option value="time">â° Czas</option>
                        <option value="days">ğŸ“… Dni i miesiÄ…ce</option>
                    </optgroup>
                    <optgroup label="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Ludzie">
                        <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Rodzina</option>
                        <option value="body">ğŸ§ CiaÅ‚o</option>
                        <option value="clothes">ğŸ‘” Ubrania</option>
                        <option value="emotions">ğŸ˜€ Emocje</option>
                        <option value="character">ğŸ­ Charakter</option>
                    </optgroup>
                    <optgroup label="ğŸ  Å»ycie codzienne">
                        <option value="home">ğŸ  Dom</option>
                        <option value="food">ğŸ• Jedzenie</option>
                        <option value="drinks">ğŸ¥¤ Napoje</option>
                        <option value="shopping">ğŸ›’ Zakupy</option>
                        <option value="restaurant">ğŸ½ï¸ Restauracja</option>
                    </optgroup>
                    <optgroup label="ğŸŒ Åšwiat">
                        <option value="city">ğŸ™ï¸ Miasto</option>
                        <option value="travel">âœˆï¸ PodrÃ³Å¼e</option>
                        <option value="transport">ğŸš— Transport</option>
                        <option value="nature">ğŸŒ³ Natura</option>
                        <option value="weather">ğŸŒ¤ï¸ Pogoda</option>
                        <option value="animals">ğŸ• ZwierzÄ™ta</option>
                    </optgroup>
                    <optgroup label="ğŸ“š Nauka i praca">
                        <option value="school">ğŸ“ SzkoÅ‚a</option>
                        <option value="work">ğŸ’¼ Praca</option>
                        <option value="professions">ğŸ‘¨â€âš•ï¸ Zawody</option>
                        <option value="office">ğŸ–¥ï¸ Biuro</option>
                    </optgroup>
                    <optgroup label="ğŸ‰ Czas wolny">
                        <option value="hobby">âš½ Hobby</option>
                        <option value="sports">ğŸƒ Sport</option>
                        <option value="music">ğŸµ Muzyka</option>
                        <option value="culture">ğŸ­ Kultura</option>
                    </optgroup>
                    <optgroup label="ğŸ“– Gramatyka">
                        <option value="verbs">ğŸƒ Czasowniki</option>
                        <option value="adjectives">ğŸ“ Przymiotniki</option>
                        <option value="adverbs">âš¡ PrzysÅ‚Ã³wki</option>
                        <option value="prepositions">ğŸ“ Przyimki</option>
                        <option value="conjunctions">ğŸ”— SpÃ³jniki</option>
                    </optgroup>
                    <optgroup label="ğŸ’¬ Komunikacja">
                        <option value="phrases">ğŸ’¬ Zwroty</option>
                        <option value="questions">â“ Pytania</option>
                        <option value="opinions">ğŸ’­ Opinie</option>
                        <option value="business">ğŸ’¼ Biznes</option>
                        <option value="formal">ğŸ“œ JÄ™zyk formalny</option>
                    </optgroup>
                    <optgroup label="ğŸ¥ Sytuacje">
                        <option value="health">ğŸ¥ Zdrowie</option>
                        <option value="emergency">ğŸš¨ NagÅ‚e wypadki</option>
                        <option value="bank">ğŸ¦ Bank</option>
                        <option value="hotel">ğŸ¨ Hotel</option>
                    </optgroup>
                    <optgroup label="ğŸ†• Nowe kategorie">
                        <option value="technology">ğŸ’» Technologia</option>
                        <option value="socialmedia">ğŸ“± Social Media</option>
                        <option value="vacation">ğŸ–ï¸ Wakacje</option>
                        <option value="business">ğŸ’¼ Biznes</option>
                        <option value="relationships">â¤ï¸ Relacje</option>
                        <option value="entertainment">ğŸ¬ Rozrywka</option>
                        <option value="fitness">ğŸƒ Fitness</option>
                    </optgroup>
                    <optgroup label="â­ WÅ‚asne">
                        <option value="custom">â­ Moje sÅ‚Ã³wka</option>
                    </optgroup>
                </select>
            </div>
            
            <div class="flashcard" onclick="flipCard()">
                <div class="flashcard-inner" id="flashcardInner">
                    <div class="flashcard-front">
                        <span id="germanWord">Hallo</span>
                        <button class="sound-btn" onclick="event.stopPropagation(); playSound()">ğŸ”Š</button>
                    </div>
                    <div class="flashcard-back">
                        <span id="polishWord">CzeÅ›Ä‡</span>
                        <p id="exampleSentence" class="example"></p>
                    </div>
                </div>
            </div>
            
            <div class="flashcard-controls">
                <button class="control-btn wrong" onclick="markWord(false)">âŒ Nie umiem</button>
                <button class="control-btn correct" onclick="markWord(true)">âœ… Umiem!</button>
            </div>
            
            <div class="card-counter">
                <span id="cardCounter">1 / 10</span>
            </div>
        </div>

        <!-- Ekran Memory -->
        <div id="memory" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <div class="memory-header">
                <h2>ğŸ® Memory</h2>
                <div class="memory-stats">
                    <span>Ruchy: <span id="memoryMoves">0</span></span>
                    <span>Pary: <span id="memoryPairs">0</span>/<span id="memoryTotal">6</span></span>
                </div>
            </div>
            
            <div class="memory-difficulty">
                <button class="diff-btn active" onclick="setMemoryDifficulty('easy', this)">Åatwy</button>
                <button class="diff-btn" onclick="setMemoryDifficulty('medium', this)">Åšredni</button>
                <button class="diff-btn" onclick="setMemoryDifficulty('hard', this)">Trudny</button>
            </div>
            
            <div class="memory-board" id="memoryBoard"></div>
            
            <button class="check-btn" onclick="restartMemory()">ğŸ”„ Nowa gra</button>
        </div>

        <!-- Ekran quizu -->
        <div id="quiz" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <div class="quiz-header">
                <span id="quizProgress">Pytanie 1/10</span>
                <span id="quizScore">Wynik: 0</span>
            </div>
            
            <div class="quiz-question">
                <h2 id="quizWord">Hallo</h2>
                <p>Wybierz poprawne tÅ‚umaczenie:</p>
            </div>
            
            <div class="quiz-options" id="quizOptions"></div>
            <div id="quizFeedback" class="quiz-feedback hidden"></div>
        </div>

        <!-- Ekran gramatyki -->
        <div id="grammar" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>âœï¸ Gramatyka</h2>
            
            <div class="grammar-topics">
                <button class="topic-btn" onclick="loadGrammarTopic('articles')">
                    <span>der/die/das</span>
                    <span class="topic-desc">Rodzajniki</span>
                </button>
                <button class="topic-btn" onclick="loadGrammarTopic('verbs')">
                    <span>Czasowniki</span>
                    <span class="topic-desc">Odmiana</span>
                </button>
                <button class="topic-btn" onclick="loadGrammarTopic('cases')">
                    <span>Przypadki</span>
                    <span class="topic-desc">Nominativ, Akkusativ...</span>
                </button>
                <button class="topic-btn" onclick="loadGrammarTopic('perfect')">
                    <span>Perfekt</span>
                    <span class="topic-desc">Czas przeszÅ‚y</span>
                </button>
                <button class="topic-btn" onclick="loadGrammarTopic('modal')">
                    <span>Modalverben</span>
                    <span class="topic-desc">Czasowniki modalne</span>
                </button>
                <button class="topic-btn" onclick="loadGrammarTopic('praeteritum')">
                    <span>PrÃ¤teritum</span>
                    <span class="topic-desc">Czas przeszÅ‚y prosty</span>
                </button>
            </div>
            
            <div id="grammarContent" class="grammar-content hidden"></div>
            <div id="grammarExercise" class="grammar-exercise hidden"></div>
        </div>

        <!-- Ekran sÅ‚uchania -->
        <div id="listening" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>ğŸ§ Ä†wiczenie sÅ‚uchania</h2>
            
            <div class="listening-card">
                <button class="big-sound-btn" onclick="playListeningWord()">ğŸ”Š PosÅ‚uchaj</button>
                <input type="text" id="listeningInput" placeholder="Wpisz co sÅ‚yszysz..." 
                       onkeypress="if(event.key==='Enter') checkListening()">
                <button class="check-btn" onclick="checkListening()">SprawdÅº</button>
                <div id="listeningFeedback" class="feedback hidden"></div>
            </div>
        </div>

        <!-- Ekran mÃ³wienia -->
        <div id="speaking" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>ğŸ¤ Ä†wicz wymowÄ™</h2>
            
            <div class="speaking-card">
                <div class="word-to-say">
                    <p>Powiedz to sÅ‚owo:</p>
                    <h2 id="speakingWord">Hallo</h2>
                    <p id="speakingTranslation" class="translation">CzeÅ›Ä‡</p>
                </div>
                
                <button class="listen-btn" onclick="playSpeakingWord()">
                    ğŸ”Š PosÅ‚uchaj wymowy
                </button>
                
                <button class="big-mic-btn" id="micButton" onclick="startSpeechRecognition()">
                    ğŸ¤ NaciÅ›nij i mÃ³w
                </button>
                
                <div id="speechResult" class="speech-result hidden">
                    <p>PowiedziaÅ‚eÅ›:</p>
                    <h3 id="userSpeech"></h3>
                </div>
                
                <div id="speakingFeedback" class="feedback hidden"></div>
                
                <button class="check-btn" onclick="nextSpeakingWord()">â¡ï¸ NastÄ™pne sÅ‚owo</button>
            </div>
        </div>

        <!-- Ekran postÄ™pÃ³w -->
        <div id="progress" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>ğŸ“Š Twoje postÄ™py</h2>
            
            <div class="level-detail">
                <div class="level-icon" id="levelIcon">ğŸŒ±</div>
                <h3 id="levelTitleBig">PoczÄ…tkujÄ…cy</h3>
                <p>Poziom <span id="currentLevel">1</span></p>
                <div class="level-progress-bar">
                    <div id="levelProgressBig" class="level-progress-fill" style="width: 0%"></div>
                </div>
                <p class="xp-info"><span id="currentXP">0</span> / <span id="nextLevelXP">100</span> XP</p>
            </div>

            <div class="lang-level-progress">
                <h3>ğŸ“š PostÄ™p wg poziomu jÄ™zykowego</h3>
                <div class="lang-progress-item">
                    <span>A1</span>
                    <div class="lang-progress-bar"><div id="a1Progress" class="lang-progress-fill"></div></div>
                    <span id="a1Count">0</span>
                </div>
                <div class="lang-progress-item">
                    <span>A2</span>
                    <div class="lang-progress-bar"><div id="a2Progress" class="lang-progress-fill"></div></div>
                    <span id="a2Count">0</span>
                </div>
                <div class="lang-progress-item">
                    <span>B1</span>
                    <div class="lang-progress-bar"><div id="b1Progress" class="lang-progress-fill"></div></div>
                    <span id="b1Count">0</span>
                </div>
                <div class="lang-progress-item">
                    <span>B2</span>
                    <div class="lang-progress-bar"><div id="b2Progress" class="lang-progress-fill"></div></div>
                    <span id="b2Count">0</span>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value" id="wordsLearned">0</span>
                    <span class="stat-label">SÅ‚Ã³wek</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="quizzesDone">0</span>
                    <span class="stat-label">QuizÃ³w</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="accuracy">0%</span>
                    <span class="stat-label">DokÅ‚adnoÅ›Ä‡</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="streakDays">0</span>
                    <span class="stat-label">Dni z rzÄ™du</span>
                </div>
            </div>

            <!-- Wykresy -->
            <div class="charts-section">
                <h3>ğŸ“ˆ Statystyki</h3>
                <div class="chart-container">
                    <canvas id="weeklyChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="categoryChart"></canvas>
                </div>
            </div>
            
            <div class="achievements">
                <h3>ğŸ† OsiÄ…gniÄ™cia</h3>
                <div id="achievementsList" class="achievements-list"></div>
            </div>
        </div>

        <!-- Ekran poziomÃ³w -->
        <div id="levels" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>ğŸ† TwÃ³j poziom</h2>
            
            <div class="current-level-big">
                <span class="big-level-icon" id="bigLevelIcon">ğŸŒ±</span>
                <h2 id="bigLevelTitle">PoczÄ…tkujÄ…cy</h2>
                <p>Poziom <span id="bigCurrentLevel">1</span></p>
                <div class="big-progress-bar">
                    <div id="bigLevelProgress" class="big-progress-fill"></div>
                </div>
                <p><span id="bigCurrentXP">0</span> / <span id="bigNextXP">100</span> XP</p>
            </div>
            
            <h3 style="margin: 20px 0 15px;">Wszystkie poziomy:</h3>
            <div class="all-levels-list" id="allLevelsList"></div>
        </div>

        <!-- Ekran czatu AI -->
        <div id="chat" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <div class="chat-header">
                <h2>ğŸ¤– Rozmowa</h2>
                <div class="chat-stats-mini">
                    <span>â­ <span id="chatScore">0</span></span>
                    <span>ğŸ¯ <span id="chatAccuracy">0%</span></span>
                </div>
            </div>
            
            <!-- Aktywna misja -->
            <div class="chat-mission" id="chatMission">
                <div class="mission-header">
                    <span>ğŸ¯ Misja:</span>
                    <span class="mission-title" id="missionTitle">Wybierz scenariusz</span>
                </div>
                <div class="mission-progress">
                    <div class="mission-progress-bar" id="missionProgressBar" style="width: 0%"></div>
                </div>
                <span class="mission-steps" id="missionSteps">0/3</span>
            </div>
            
            <!-- Scenariusze - rozszerzone -->
            <div class="chat-scenario-tabs">
                <div class="scenario-row">
                    <button class="scenario-btn" onclick="startScenario('cafe')">â˜• Kawiarnia</button>
                    <button class="scenario-btn" onclick="startScenario('shop')">ğŸ›’ Sklep</button>
                    <button class="scenario-btn" onclick="startScenario('travel')">âœˆï¸ PodrÃ³Å¼</button>
                    <button class="scenario-btn" onclick="startScenario('work')">ğŸ’¼ Praca</button>
                </div>
                <div class="scenario-row">
                    <button class="scenario-btn" onclick="startScenario('doctor')">ğŸ¥ Lekarz</button>
                    <button class="scenario-btn" onclick="startScenario('hotel')">ğŸ¨ Hotel</button>
                    <button class="scenario-btn" onclick="startScenario('airport')">âœˆï¸ Lotnisko</button>
                    <button class="scenario-btn" onclick="startScenario('date')">â¤ï¸ Randka</button>
                </div>
                <div class="scenario-row">
                    <button class="scenario-btn" onclick="startScenario('interview')">ğŸ‘” Rozmowa o pracÄ™</button>
                    <button class="scenario-btn" onclick="startScenario('restaurant')">ğŸ½ï¸ Restauracja</button>
                    <button class="scenario-btn" onclick="startScenario('free')">ğŸ’¬ Wolna</button>
                </div>
            </div>
            
            <div class="chat-container" id="chatContainer">
                <div class="chat-message bot">
                    <span>Hallo! WÃ¤hle ein Szenario und starte eine Mission! ğŸ˜Š
                    <br><small>(CzeÅ›Ä‡! Wybierz scenariusz i rozpocznij misjÄ™!)</small></span>
                </div>
            </div>
            
            <div class="chat-input-container">
                <button class="mic-btn-small" onclick="startChatSpeech()">ğŸ¤</button>
                <input type="text" id="chatInput" placeholder="Napisz po niemiecku..." 
                       onkeypress="if(event.key==='Enter') sendMessage()">
                <button onclick="sendMessage()">ğŸ“¤</button>
            </div>
            
            <div class="chat-suggestions" id="chatSuggestions">
                <button onclick="useSuggestion('Hallo!')">Hallo!</button>
                <button onclick="useSuggestion('Wie geht es?')">Wie geht es?</button>
                <button onclick="useSuggestion('Danke!')">Danke!</button>
            </div>
            
            <!-- Panel pomocy -->
            <div class="chat-help-panel" id="chatHelpPanel">
                <button class="help-toggle" onclick="toggleChatHelp()">ğŸ’¡ Pomoc</button>
                <div class="help-content hidden" id="helpContent">
                    <p><strong>Przydatne zwroty:</strong></p>
                    <div id="helpPhrases"></div>
                </div>
            </div>
        </div>

        <!-- Ekran moich sÅ‚Ã³wek -->
        <div id="mywords" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>â• Moje sÅ‚Ã³wka</h2>
            
            <div class="add-word-form">
                <h3>Dodaj nowe sÅ‚Ã³wko</h3>
                <input type="text" id="newWordDe" placeholder="ğŸ‡©ğŸ‡ª SÅ‚owo po niemiecku">
                <input type="text" id="newWordPl" placeholder="ğŸ‡µğŸ‡± TÅ‚umaczenie po polsku">
                <input type="text" id="newWordExample" placeholder="ğŸ“ PrzykÅ‚ad (opcjonalne)">
                <select id="newWordLevel">
                    <option value="A1">Poziom A1</option>
                    <option value="A2">Poziom A2</option>
                    <option value="B1">Poziom B1</option>
                    <option value="B2">Poziom B2</option>
                </select>
                <button class="check-btn" onclick="addCustomWord()">â• Dodaj sÅ‚Ã³wko</button>
            </div>
            
            <div class="my-words-list">
                <h3>Twoje sÅ‚Ã³wka (<span id="customWordCount">0</span>)</h3>
                <div id="customWordsList"></div>
            </div>
        </div>

        <!-- Ekran ustawieÅ„ -->
        <div id="reminders" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>âš™ï¸ Ustawienia</h2>
            
            <div class="settings-section">
                <h3>ğŸ¨ WyglÄ…d</h3>
                <div class="setting-row">
                    <label>Motyw:</label>
                    <button class="theme-btn" onclick="toggleTheme()">
                        <span id="themeText">ğŸŒ™ Ciemny</span>
                    </button>
                </div>
            </div>

            <div class="settings-section">
                <h3>ğŸ“ DomyÅ›lny poziom jÄ™zykowy</h3>
                <div class="setting-row">
                    <label>Poziom:</label>
                    <select id="defaultLangLevel" onchange="saveDefaultLevel()">
                        <option value="A1">A1 - PoczÄ…tkujÄ…cy</option>
                        <option value="A2">A2 - Podstawowy</option>
                        <option value="B1">B1 - Åšredniozaawansowany</option>
                        <option value="B2">B2 - Zaawansowany</option>
                    </select>
                </div>
            </div>
            
            <div class="settings-section">
                <h3>ğŸ”” Przypomnienia</h3>
                <div class="reminder-setting">
                    <label>WÅ‚Ä…cz:</label>
                    <label class="switch">
                        <input type="checkbox" id="reminderToggle" onchange="toggleReminders()">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="reminder-setting">
                    <label>Godzina:</label>
                    <input type="time" id="reminderTime" value="18:00" onchange="setReminderTime()">
                </div>
                
                <div class="reminder-setting">
                    <label>Dzienny cel:</label>
                    <select id="dailyGoal" onchange="setDailyGoal()">
                        <option value="5">5 sÅ‚Ã³wek</option>
                        <option value="10" selected>10 sÅ‚Ã³wek</option>
                        <option value="20">20 sÅ‚Ã³wek</option>
                        <option value="30">30 sÅ‚Ã³wek</option>
                        <option value="50">50 sÅ‚Ã³wek</option>
                    </select>
                </div>
            </div>
            
            <div class="daily-progress">
                <h3>ğŸ“Š Dzisiejszy postÄ™p</h3>
                <div class="daily-goal-bar">
                    <div class="daily-goal-fill" id="dailyGoalFill" style="width: 0%"></div>
                </div>
                <p id="dailyGoalText">0 / 10 sÅ‚Ã³wek</p>
            </div>
            
            <div class="settings-section danger-zone">
                <h3>âš ï¸ Dane</h3>
                <button class="danger-btn" onclick="exportProgress()">ğŸ“¥ Eksportuj postÄ™py</button>
                <button class="danger-btn" onclick="importProgress()">ğŸ“¤ Importuj postÄ™py</button>
                <button class="danger-btn red" onclick="resetProgress()">ğŸ—‘ï¸ Resetuj wszystko</button>
            </div>
        </div>

        <!-- Ekran gry Pisanie -->
        <div id="typing" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>âœï¸ Pisanie</h2>
            
            <div class="typing-stats">
                <div class="typing-stat">
                    <span class="typing-stat-value" id="typingScore">0</span>
                    <span class="typing-stat-label">Punkty</span>
                </div>
                <div class="typing-stat">
                    <span class="typing-stat-value" id="typingStreak">0</span>
                    <span class="typing-stat-label">Seria</span>
                </div>
                <div class="typing-stat">
                    <span class="typing-stat-value" id="typingProgress">0/10</span>
                    <span class="typing-stat-label">PostÄ™p</span>
                </div>
            </div>
            
            <div class="typing-word-display">
                <div class="word-hint" id="typingHint">ğŸ‡µğŸ‡± TÅ‚umaczenie</div>
                <div class="word-to-type" id="typingPolish">dom</div>
                <button class="sound-btn" onclick="speakTypingWord()">ğŸ”Š PosÅ‚uchaj</button>
            </div>
            
            <div class="typing-input-section">
                <input type="text" 
                       id="typingInput" 
                       class="typing-input" 
                       placeholder="Wpisz po niemiecku..."
                       autocomplete="off"
                       onkeypress="if(event.key==='Enter') checkTypingAnswer()">
                <div class="typing-feedback hidden" id="typingFeedback"></div>
            </div>
            
            <div class="typing-buttons">
                <button class="skip-btn" onclick="skipTypingWord()">â­ï¸ PomiÅ„</button>
                <button class="hint-btn" onclick="showTypingHint()">ğŸ’¡ PodpowiedÅº</button>
                <button class="check-btn" onclick="checkTypingAnswer()">âœ… SprawdÅº</button>
            </div>
        </div>

        <!-- Ekran sÅ‚ownika -->
        <div id="dictionary" class="screen">
            <button class="back-btn" onclick="goToMenu()">â† PowrÃ³t</button>
            <h2>ğŸ“– SÅ‚ownik</h2>

            <div class="dict-level-filter">
                <button class="dict-level-btn active" onclick="filterDictByLevel('all', this)">Wszystkie</button>
                <button class="dict-level-btn" onclick="filterDictByLevel('A1', this)">A1</button>
                <button class="dict-level-btn" onclick="filterDictByLevel('A2', this)">A2</button>
                <button class="dict-level-btn" onclick="filterDictByLevel('B1', this)">B1</button>
                <button class="dict-level-btn" onclick="filterDictByLevel('B2', this)">B2</button>
            </div>
            
            <div class="search-box">
                <input type="text" id="searchWord" placeholder="ğŸ” Szukaj..." oninput="searchWords()">
            </div>
            
            <div class="category-tabs" id="categoryTabs">
                <button class="tab-btn active" onclick="filterByCategory('all', this)">Wszystkie</button>
                <button class="tab-btn" onclick="filterByCategory('basics', this)">Podstawy</button>
                <button class="tab-btn" onclick="filterByCategory('verbs', this)">Czasowniki</button>
                <button class="tab-btn" onclick="filterByCategory('phrases', this)">Zwroty</button>
                <button class="tab-btn" onclick="filterByCategory('food', this)">Jedzenie</button>
            </div>
            
            <div class="word-count">
                Znaleziono: <span id="wordCount">0</span> sÅ‚Ã³w
            </div>
            
            <div class="dictionary-list" id="dictionaryList"></div>
        </div>

    </div>

    <!-- Przycisk instalacji PWA -->
    <div id="installPrompt" class="install-prompt hidden">
        <div class="install-content">
            <span>ğŸ“± Zainstaluj aplikacjÄ™!</span>
            <button onclick="installPWA()">Instaluj</button>
            <button onclick="hideInstallPrompt()" class="close-btn">âœ•</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="words.js"></script>
    <script src="app.js"></script>
    
    <!-- Rejestracja Service Worker -->
    <script>
        // Rejestracja Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('âœ… Service Worker zarejestrowany:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('âŒ BÅ‚Ä…d rejestracji Service Worker:', error);
                    });
            });
        }
        
        // ObsÅ‚uga instalacji PWA
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', function(e) {
            e.preventDefault();
            deferredPrompt = e;
            
            // PokaÅ¼ przycisk instalacji po 3 sekundach
            setTimeout(function() {
                document.getElementById('installPrompt').classList.remove('hidden');
            }, 3000);
        });
        
        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(function(choiceResult) {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('âœ… UÅ¼ytkownik zainstalowaÅ‚ aplikacjÄ™');
                        showToast('ğŸ‰ Aplikacja zainstalowana!');
                    }
                    deferredPrompt = null;
                    hideInstallPrompt();
                });
            }
        }
        
        function hideInstallPrompt() {
            document.getElementById('installPrompt').classList.add('hidden');
        }
        
        // Wykryj tryb standalone (aplikacja zainstalowana)
        if (window.matchMedia('(display-mode: standalone)').matches) {
            console.log('ğŸ“± Aplikacja dziaÅ‚a w trybie standalone');
        }
        
        // ObsÅ‚uga iOS - informacja o instalacji
        function isIOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent);
        }
        
        if (isIOS() && !window.navigator.standalone) {
            setTimeout(function() {
                showToast('ğŸ“± iOS: Kliknij "UdostÄ™pnij" â†’ "Dodaj do ekranu poczÄ…tkowego"');
            }, 5000);
        }
    </script>
</body>
</html>